{"version":3,"sources":["FirstLevel.js"],"names":["global","require","cc","Class","extends","Component","properties","groundOnePrefab","default","type","Prefab","groundTwoPrefab","groundWinnerPrefab","player","Node","floor","background","ScoreNumber","Label","LivesNumber","tmpScore","tmpLives","spawner","randY","randX","i","path","length","groundSpawn","Math","random","newGround","instantiate","setPosition","p","parent","node","sprite","getComponent","Sprite","loader","loadRes","err","data","spriteFrame","SpriteFrame","bind","log","onLoad","Lives","globalLives","Score","globalScore","globalPath","Started","update","dt","y","string","x","director","loadScene"],"mappings":";;;;;;AAAA,IAAIA,SAASC,QAAQ,YAAR,CAAb;;AAEAC,GAAGC,KAAH,CAAS;AACLC,UAASF,GAAGG,SADP;;AAGLC,aAAY;AACdC,mBAAiB;AACPC,YAAS,IADF;AAEPC,SAAMP,GAAGQ;AAFF,GADH;;AAMdC,mBAAiB;AACPH,YAAS,IADF;AAEPC,SAAMP,GAAGQ;AAFF,GANH;AAUdE,sBAAoB;AACVJ,YAAS,IADC;AAEVC,SAAMP,GAAGQ;AAFC,GAVN;;AAeXG,UAAQ;AACDL,YAAS,IADR;AAEDC,SAAMP,GAAGY;AAFR,GAfG;AAmBdC,SAAM;AACLP,YAAS,IADJ;AAELC,SAAMP,GAAGY;AAFJ,GAnBQ;;AAwBdE,cAAW;AACVR,YAAS,IADC;AAEVC,SAAMP,GAAGY;AAFC,GAxBG;AA4BdG,eAAa;AACZT,YAAS,IADG;AAEZC,SAAMP,GAAGgB;AAFG,GA5BC;AAgCdC,eAAa;AACZX,YAAS,IADG;AAEZC,SAAMP,GAAGgB;AAFG,GAhCC;AAoCdE,YAAS,CApCK;AAqCdC,YAAS;AArCK,EAHP;;AA4CRC,UAAS,mBAAU;;AAEnB,MAAIC,QAAM,CAAV;AACA,MAAIC,QAAM,CAAV;;AAEA,OAAI,IAAIC,IAAE,CAAV,EAAYA,IAAE,KAAKC,IAAL,CAAU,CAAV,EAAaC,MAAb,GAAoB,CAAlC,EAAoCF,GAApC,EAAwC;AACxC;AACA,OAAIG,cAAcC,KAAKd,KAAL,CAAYc,KAAKC,MAAL,KAAgB,CAAjB,GAAsB,CAAjC,CAAlB;AACA;AACA,WAAQ,CAAR;AACO,SAAK,CAAL;AACL,SAAIC,YAAY7B,GAAG8B,WAAH,CAAe,KAAKzB,eAApB,CAAhB;AACAwB,eAAUE,WAAV,CAAsB/B,GAAGgC,CAAH,CAAK,KAAKR,IAAL,CAAU,CAAV,EAAaD,CAAb,CAAL,EAAsB,KAAKC,IAAL,CAAU,CAAV,EAAaD,IAAE,CAAf,CAAtB,CAAtB;AACAM,eAAUI,MAAV,GAAmB,KAAKC,IAAxB;AACA,SAAIC,SAASN,UAAUO,YAAV,CAAuBpC,GAAGqC,MAA1B,CAAb;AACArC,QAAGsC,MAAH,CAAUC,OAAV,CAAkB,WAAlB,EAA+B,UAASC,GAAT,EAAcC,IAAd,EAAoB;AAClD,WAAKC,WAAL,GAAmB,IAAI1C,GAAG2C,WAAP,CAAmBF,IAAnB,CAAnB;AACA,MAF8B,CAE7BG,IAF6B,CAExBT,MAFwB,CAA/B;AAGA;AACK,SAAK,CAAL;AACI;AACA;AACA;;AAET,SAAIN,YAAY7B,GAAG8B,WAAH,CAAe,KAAKrB,eAApB,CAAhB;AACAoB,eAAUE,WAAV,CAAsB/B,GAAGgC,CAAH,CAAK,KAAKR,IAAL,CAAU,CAAV,EAAaD,CAAb,CAAL,EAAsB,KAAKC,IAAL,CAAU,CAAV,EAAaD,IAAE,CAAf,CAAtB,CAAtB;AACAM,eAAUI,MAAV,GAAmB,KAAKC,IAAxB;AACA,SAAIC,SAASN,UAAUO,YAAV,CAAuBpC,GAAGqC,MAA1B,CAAb;AACArC,QAAGsC,MAAH,CAAUC,OAAV,CAAkB,WAAlB,EAA+B,UAASC,GAAT,EAAcC,IAAd,EAAoB;AAClD,WAAKC,WAAL,GAAmB,IAAI1C,GAAG2C,WAAP,CAAmBF,IAAnB,CAAnB;AACA,MAF8B,CAE7BG,IAF6B,CAExBT,MAFwB,CAA/B;AAGA;AAtBF;AAwBCnC,MAAG6C,GAAH,CAAO,KAAKrB,IAAL,CAAU,CAAV,EAAaC,MAApB;AACAzB,MAAG6C,GAAH,CAAOtB,CAAP;AACAA;;AAEA,OAAGA,IAAG,KAAKC,IAAL,CAAU,CAAV,EAAaC,MAAb,GAAoB,CAA1B,EAA6B;AAC5B;AACA;AACA;AACA,QAAII,YAAY7B,GAAG8B,WAAH,CAAe,KAAKpB,kBAApB,CAAhB;AACAmB,cAAUE,WAAV,CAAsB/B,GAAGgC,CAAH,CAAK,KAAKR,IAAL,CAAU,CAAV,EAAaD,IAAE,CAAf,CAAL,EAAwB,KAAKC,IAAL,CAAU,CAAV,EAAaD,IAAE,CAAf,CAAxB,CAAtB;AACAM,cAAUI,MAAV,GAAmB,KAAKC,IAAxB;AACA,QAAIC,SAASN,UAAUO,YAAV,CAAuBpC,GAAGqC,MAA1B,CAAb;AACArC,OAAGsC,MAAH,CAAUC,OAAV,CAAkB,WAAlB,EAA+B,UAASC,GAAT,EAAcC,IAAd,EAAoB;AAClD,UAAKC,WAAL,GAAmB,IAAI1C,GAAG2C,WAAP,CAAmBF,IAAnB,CAAnB;AACA,KAF8B,CAE7BG,IAF6B,CAExBT,MAFwB,CAA/B;AAGA;AAGD;AAGA,EAlGO;;AAqGL;AACAW,SAAQ,kBAAY;AACtB,OAAKC,KAAL,GAAWjD,OAAOkD,WAAP,EAAX;AACA,OAAKC,KAAL,GAAWnD,OAAOoD,WAAP,EAAX;AACA,OAAK1B,IAAL,GAAU1B,OAAOqD,UAAP,EAAV;AACA,OAAK/B,OAAL;AACA,OAAKgC,OAAL,GAAa,KAAb;AACA;AACG,EA7GI;;AA+GL;AACAC,SAAQ,gBAAUC,EAAV,EAAc;AACxB;AACA;AACA,MAAG,KAAK3C,MAAL,CAAY4C,CAAZ,GAAgB,KAAKrC,QAAxB,EAAiC;AAChC,QAAKA,QAAL,IAAe,GAAf;AACA,QAAK+B,KAAL,IAAY,GAAZ;AACA,QAAKlC,WAAL,CAAiByC,MAAjB,GAAwB,KAAKP,KAA7B;AACA;AACD;AACA;AACA;AACA;AACA,MAAG,KAAKtC,MAAL,CAAY4C,CAAZ,GAAc,IAAd,KAAsB,KAAK5C,MAAL,CAAY8C,CAAZ,GAAgB,GAAhB,IAAuB,KAAK9C,MAAL,CAAY8C,CAAZ,GAAe,GAA5D,CAAH,EAAoE;AACnEzD,MAAG6C,GAAH,CAAO,QAAP;AACA;AACA,OAAIa,WAAW1D,GAAG0D,QAAlB;AACAA,YAASC,SAAT,CAAmB,UAAnB;AACA;AACD,MAAI,KAAKzC,QAAL,GAAc,GAAf,GAAoB,KAAKP,MAAL,CAAY4C,CAAnC,EAAqC;AACpCvD,MAAG6C,GAAH,CAAO,MAAP;AACA,OAAIa,WAAW1D,GAAG0D,QAAlB;AACAA,YAASC,SAAT,CAAmB,UAAnB;AACA;AACD,MAAG,KAAKP,OAAL,IAAgB,KAAKzC,MAAL,CAAY4C,CAAZ,GAAc,GAAjC,EAAqC;AACpC,QAAKH,OAAL,GAAa,IAAb;AACA,QAAKjC,QAAL;AACA,QAAKF,WAAL,CAAiBuC,MAAjB,GAAwB,KAAKrC,QAA7B;AACA;AACE;AA5II,CAAT","file":"FirstLevel.js","sourceRoot":"..\\..\\..\\..\\assets\\Scripts","sourcesContent":["var global = require(\"GlobalData\")\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\t\r\n    properties: {\r\n\t\tgroundOnePrefab: {\r\n            default: null,\r\n            type: cc.Prefab\r\n        },\r\n\r\n\t\tgroundTwoPrefab: {\r\n            default: null,\r\n            type: cc.Prefab\t\t\t\r\n\t\t},\r\n\t\tgroundWinnerPrefab: {\r\n            default: null,\r\n            type: cc.Prefab\t\t\t\r\n\t\t},\r\n\t\t\r\n\t    player: {\r\n            default: null,\r\n            type: cc.Node\r\n        },\r\n\t\tfloor:{\r\n\t\t\tdefault: null,\r\n\t\t\ttype: cc.Node\r\n\t\t},\r\n\t\t\r\n\t\tbackground:{\r\n\t\t\tdefault: null,\r\n\t\t\ttype: cc.Node\r\n\t\t},\r\n\t\tScoreNumber: {\r\n\t\t\tdefault: null,\r\n\t\t\ttype: cc.Label\r\n\t\t},\r\n\t\tLivesNumber: {\r\n\t\t\tdefault: null,\r\n\t\t\ttype: cc.Label\r\n\t\t},\r\n\t\ttmpScore:0,\r\n\t\ttmpLives:5\r\n    },\r\n\t\r\n\r\n\tspawner: function(){\t\r\n\r\n\tvar randY=0;\r\n\tvar randX=0;\r\n\t\r\n\tfor(var i=0;i<this.path[0].length-2;i++){\r\n\t// Select a random ground (1 to 2 ground)\r\n\tvar groundSpawn = Math.floor((Math.random() * 2) + 1);\r\n\t//creat the 1 or 2 prefab based on the random number\r\n\tswitch (2) {\r\n        case 1:\t\t   \r\n\t\t\tvar newGround = cc.instantiate(this.groundOnePrefab);\t\r\n\t\t\tnewGround.setPosition(cc.p(this.path[0][i], this.path[0][i+1]));\r\n\t\t\tnewGround.parent = this.node;\r\n\t\t\tvar sprite = newGround.getComponent(cc.Sprite);\r\n\t\t\tcc.loader.loadRes(\"groundone\", function(err, data) {\r\n\t\t\t\tthis.spriteFrame = new cc.SpriteFrame(data);\r\n\t\t\t}.bind(sprite));\r\n\t\t\tbreak;\r\n        case 2:\r\n            //var newGround = cc.instantiate(this.groundTwoPrefab);\r\n            //this.groundTwoNode.addChild(newGround);\r\n            //break;\r\n\t\t\t\r\n\t\t\tvar newGround = cc.instantiate(this.groundTwoPrefab);\r\n\t\t\tnewGround.setPosition(cc.p(this.path[0][i], this.path[0][i+1]));\r\n\t\t\tnewGround.parent = this.node;\r\n\t\t\tvar sprite = newGround.getComponent(cc.Sprite);\r\n\t\t\tcc.loader.loadRes(\"groundtwo\", function(err, data) {\r\n\t\t\t\tthis.spriteFrame = new cc.SpriteFrame(data);\r\n\t\t\t}.bind(sprite));\r\n\t\t\tbreak;\r\n        }\r\n\t\tcc.log(this.path[0].length);\r\n\t\tcc.log(i);\r\n\t\ti++;\r\n\t\t\r\n\t\tif(i>(this.path[0].length-4)){\r\n\t\t\t//cc.log(\"inside\");\r\n\t\t\t//cc.log(this.path[0][i+1]);\r\n\t\t\t//cc.log(this.path[0][i+2]);\r\n\t\t\tvar newGround = cc.instantiate(this.groundWinnerPrefab);\r\n\t\t\tnewGround.setPosition(cc.p(this.path[0][i+1], this.path[0][i+2]));\r\n\t\t\tnewGround.parent = this.node;\r\n\t\t\tvar sprite = newGround.getComponent(cc.Sprite);\r\n\t\t\tcc.loader.loadRes(\"groundwin\", function(err, data) {\r\n\t\t\t\tthis.spriteFrame = new cc.SpriteFrame(data);\r\n\t\t\t}.bind(sprite));\r\n\t\t}\r\n\t\t\r\n\t\t\r\n\t}\r\n\t\r\n\t\t\r\n\t},\r\n\t\r\n\r\n    // use this for initialization\r\n    onLoad: function () {\r\n\t\tthis.Lives=global.globalLives();\r\n\t\tthis.Score=global.globalScore();\r\n\t\tthis.path=global.globalPath();\r\n\t\tthis.spawner();\t\r\n\t\tthis.Started=false;\r\n\t\t//this.LivesNumber.string;\r\n    },\r\n\t\r\n    // called every frame, uncomment this function to activate update callback\r\n    update: function (dt) {\r\n\t\t//cc.log(this.player.x);\r\n\t\t//getting score based on reached heights\r\n\t\tif(this.player.y > this.tmpScore){\r\n\t\t\tthis.tmpScore+=100;\r\n\t\t\tthis.Score+=100;\r\n\t\t\tthis.ScoreNumber.string=this.Score;\t\r\n\t\t}\r\n\t\t//if(!this.Started){\r\n\t\t//\tthis.LivesNumber.setString(parseInt(this.tmpScore));\r\n\t\t//\tthis.ScoreNumber.setString(parseInt(this.tmpLives));\r\n\t\t//}\r\n\t\tif(this.player.y>1950&& (this.player.x < 480 || this.player.x >420)){\r\n\t\t\tcc.log(\"Winner\");\r\n\t\t\t//global.globalScore()+=this.Score;\r\n\t\t\tvar director = cc.director;\r\n\t\t\tdirector.loadScene('MainMenu');\r\n\t\t}\r\n\t\tif((this.tmpScore-500)>this.player.y){\r\n\t\t\tcc.log(\"Dead\");\r\n\t\t\tvar director = cc.director;\r\n\t\t\tdirector.loadScene('MainMenu');\r\n\t\t}\r\n\t\tif(this.Started && this.player.y>151){\r\n\t\t\tthis.Started=true;\r\n\t\t\tthis.tmpLives--;\r\n\t\t\tthis.LivesNumber.string=this.tmpLives;\r\n\t\t}\r\n    },\r\n});\r\n"]}